{"ast":null,"code":"import _slicedToArray from\"/Users/aleksandergasior/Documents/tsh/react-interview-starter-ts/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useEffect,useState}from\"react\";import classNames from\"classnames\";import Pagination from\"@material-ui/lab/Pagination\";import{AppContext}from\"../../providers/AppProviders\";import{Header}from\"app/header/Header\";import{Product}from\"../product/Product\";import{Info}from\"../info/Info\";import{FiltersOptions}from\"app/filters/Filters.enum\";import{PRODUCTS_PER_PAGE,DEFUALT_PAGE}from\"./Products.constants\";import\"./Products.scss\";var active=FiltersOptions.active,promo=FiltersOptions.promo,all=FiltersOptions.all;export var Products=function Products(){var products=useContext(AppContext);var _useState=useState([all]),_useState2=_slicedToArray(_useState,2),filters=_useState2[0],setFilters=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(products),_useState6=_slicedToArray(_useState5,2),showProducts=_useState6[0],setShowProducts=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),search=_useState8[0],setSearch=_useState8[1];useEffect(function(){return setShowProducts(products);},[products]);var filteredProducts=showProducts.filter(function(product){return search===\"\"||product.name.toLowerCase().includes(search.toLocaleLowerCase());}).filter(function(product){return product.active&&filters.includes(active)||product.promo&&filters.includes(promo)||filters.includes(all);});var countProducts=filteredProducts.length;var lastPage=Math.ceil(countProducts/PRODUCTS_PER_PAGE);var pageProducts=filteredProducts.slice(currentPage===1?0:(currentPage-1)*PRODUCTS_PER_PAGE,PRODUCTS_PER_PAGE*currentPage);var buttonPrevClassess=classNames(\"products__button\",{\"products__button--disabled\":currentPage===DEFUALT_PAGE});var buttonNextClassess=classNames(\"products__button\",{\"products__button--disabled\":currentPage===lastPage});var isProduct=pageProducts.length!==0;var renderProducts=function renderProducts(){return isProduct?/*#__PURE__*/React.createElement(\"div\",{className:\"products__container\"},pageProducts.map(function(product){var id=product.id,name=product.name,description=product.description,rating=product.rating,image=product.image,active=product.active,promo=product.promo;return/*#__PURE__*/React.createElement(Product,{name:name,description:description,rating:rating,image:image,active:active,promo:promo,id:id,key:id});})):/*#__PURE__*/React.createElement(Info,null);};var renderPagination=function renderPagination(){return isProduct?/*#__PURE__*/React.createElement(\"div\",{className:\"products__pagination\"},/*#__PURE__*/React.createElement(\"button\",{className:buttonPrevClassess,onClick:function onClick(){return setCurrentPage(DEFUALT_PAGE);}},\"First\"),/*#__PURE__*/React.createElement(Pagination,{count:lastPage,page:currentPage,siblingCount:currentPage>2?1:0,boundaryCount:lastPage>6?1:2,hidePrevButton:true,hideNextButton:true,onChange:function onChange(event,value){setCurrentPage(value);}}),/*#__PURE__*/React.createElement(\"button\",{className:buttonNextClassess,onClick:function onClick(){return setCurrentPage(lastPage);}},\"Last\")):null;};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"products\"},/*#__PURE__*/React.createElement(Header,{setFilters:setFilters,filters:filters,setSearch:setSearch,setCurrentPage:setCurrentPage}),renderProducts(),renderPagination()));};","map":{"version":3,"sources":["/Users/aleksandergasior/Documents/tsh/react-interview-starter-ts/src/app/products/Products.tsx"],"names":["React","useContext","useEffect","useState","classNames","Pagination","AppContext","Header","Product","Info","FiltersOptions","PRODUCTS_PER_PAGE","DEFUALT_PAGE","active","promo","all","Products","products","filters","setFilters","currentPage","setCurrentPage","showProducts","setShowProducts","search","setSearch","filteredProducts","filter","product","name","toLowerCase","includes","toLocaleLowerCase","countProducts","length","lastPage","Math","ceil","pageProducts","slice","buttonPrevClassess","buttonNextClassess","isProduct","renderProducts","map","id","description","rating","image","renderPagination","event","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport { AppContext } from \"../../providers/AppProviders\";\nimport { Header } from \"app/header/Header\";\nimport { Product } from \"../product/Product\";\nimport { Info } from \"../info/Info\";\n\nimport { FiltersOptions } from \"app/filters/Filters.enum\";\nimport { ProductProps } from \"app/product/Product.types\";\nimport { PRODUCTS_PER_PAGE, DEFUALT_PAGE } from \"./Products.constants\";\n\nimport \"./Products.scss\";\n\nconst { active, promo, all } = FiltersOptions;\n\nexport const Products = () => {\n  const products = useContext<ProductProps[] | null>(AppContext);\n  const [filters, setFilters] = useState<string[]>([all]);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [showProducts, setShowProducts] = useState<ProductProps[] | null>(\n    products\n  );\n  const [search, setSearch] = useState<string>(\"\");\n\n  useEffect(() => setShowProducts(products), [products]);\n\n  const filteredProducts: ProductProps[] = showProducts!\n    .filter(\n      (product) =>\n        search === \"\" ||\n        product.name.toLowerCase().includes(search.toLocaleLowerCase())\n    )\n    .filter(\n      (product) =>\n        (product.active && filters.includes(active)) ||\n        (product.promo && filters.includes(promo)) ||\n        filters.includes(all)\n    );\n\n  const countProducts: number = filteredProducts.length;\n  const lastPage: number = Math.ceil(countProducts / PRODUCTS_PER_PAGE);\n\n  const pageProducts: ProductProps[] = filteredProducts.slice(\n    currentPage === 1 ? 0 : (currentPage - 1) * PRODUCTS_PER_PAGE,\n    PRODUCTS_PER_PAGE * currentPage\n  );\n\n  const buttonPrevClassess: string = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === DEFUALT_PAGE,\n  });\n\n  const buttonNextClassess: string = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === lastPage,\n  });\n\n  const isProduct: boolean = pageProducts.length !== 0;\n\n  const renderProducts: () => JSX.Element = () =>\n    isProduct ? (\n      <div className=\"products__container\">\n        {pageProducts.map((product) => {\n          const { id, name, description, rating, image, active, promo } =\n            product;\n          return (\n            <Product\n              name={name}\n              description={description}\n              rating={rating}\n              image={image}\n              active={active}\n              promo={promo}\n              id={id}\n              key={id}\n            />\n          );\n        })}\n      </div>\n    ) : (\n      <Info />\n    );\n\n  const renderPagination: () => JSX.Element | null = () =>\n    isProduct ? (\n      <div className=\"products__pagination\">\n        <button\n          className={buttonPrevClassess}\n          onClick={() => setCurrentPage(DEFUALT_PAGE)}\n        >\n          First\n        </button>\n        <Pagination\n          count={lastPage}\n          page={currentPage}\n          siblingCount={currentPage > 2 ? 1 : 0}\n          boundaryCount={lastPage > 6 ? 1 : 2}\n          hidePrevButton\n          hideNextButton\n          onChange={(event, value) => {\n            setCurrentPage(value);\n          }}\n        />\n        <button\n          className={buttonNextClassess}\n          onClick={() => setCurrentPage(lastPage)}\n        >\n          Last\n        </button>\n      </div>\n    ) : null;\n\n  return (\n    <>\n      <div className=\"products\">\n        <Header\n          setFilters={setFilters}\n          filters={filters}\n          setSearch={setSearch}\n          setCurrentPage={setCurrentPage}\n        />\n        {renderProducts()}\n        {renderPagination()}\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}
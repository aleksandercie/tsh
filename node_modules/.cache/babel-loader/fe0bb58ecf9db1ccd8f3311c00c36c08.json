{"ast":null,"code":"var _jsxFileName = \"/Users/aleksandergasior/Documents/tsh/react-interview-starter-ts/src/app/products/Products.tsx\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport { AppContext } from \"../../providers/AppProviders\";\nimport { Header } from \"app/header/Header\";\nimport { Product } from \"../product/Product\";\nimport { Info } from \"../info/Info\";\nimport { FiltersOptions } from \"app/filters/Filters.enum\";\nimport { PRODUCTS_PER_PAGE } from \"./Products.constants\";\nimport \"./Products.scss\";\nconst {\n  active,\n  promo,\n  all\n} = FiltersOptions;\nexport const Products = () => {\n  const products = useContext(AppContext);\n  const [filters, setFilters] = useState([all]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [showProducts, setShowProducts] = useState(products);\n  const [search, setSearch] = useState(\"\");\n  useEffect(() => setShowProducts(products), [products]);\n  const filteredProducts = showProducts.filter(product => {\n    if (!product) return null;\n\n    if (search === \"\") {\n      return product;\n    } else if (product.name.toLowerCase().includes(search.toLocaleLowerCase())) {\n      return product;\n    }\n  }).filter(product => {\n    const filtredProducts = () => {\n      if (product.active && filters.includes(active)) {\n        return product;\n      }\n\n      if (product.promo && filters.includes(promo)) {\n        return product;\n      }\n\n      if (filters.includes(all)) {\n        return product;\n      }\n    };\n\n    return filteredProducts;\n  });\n  const countProducts = filteredProducts.length;\n  const lastPage = Math.ceil(countProducts / PRODUCTS_PER_PAGE);\n  const pageProducts = filteredProducts.slice(currentPage === 1 ? 0 : (currentPage - 1) * PRODUCTS_PER_PAGE, PRODUCTS_PER_PAGE * currentPage);\n  const buttonPrevClassess = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === 1\n  });\n  const buttonNextClassess = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === lastPage\n  });\n  const isProduct = pageProducts.length !== 0;\n\n  const renderProducts = () => isProduct ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"products__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, pageProducts.map(product => {\n    const {\n      id,\n      name,\n      description,\n      rating,\n      image,\n      active,\n      promo\n    } = product;\n    return /*#__PURE__*/React.createElement(Product, {\n      name: name,\n      description: description,\n      rating: rating,\n      image: image,\n      active: active,\n      promo: promo,\n      id: id,\n      key: id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    });\n  })) : /*#__PURE__*/React.createElement(Info, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  });\n\n  const renderPagination = () => isProduct ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"products__pagination\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: buttonPrevClassess,\n    onClick: () => setCurrentPage(1),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, \"First\"), /*#__PURE__*/React.createElement(Pagination, {\n    count: lastPage,\n    page: currentPage,\n    siblingCount: currentPage > 2 ? 1 : 0,\n    boundaryCount: lastPage > 6 ? 1 : 2,\n    hidePrevButton: true,\n    hideNextButton: true,\n    onChange: (event, value) => {\n      setCurrentPage(value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: buttonNextClassess,\n    onClick: () => setCurrentPage(lastPage),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }\n  }, \"Last\")) : null;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"products\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    setFilters: setFilters,\n    filters: filters,\n    setSearch: setSearch,\n    setCurrentPage: setCurrentPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 9\n    }\n  }), renderProducts(), renderPagination()));\n};","map":{"version":3,"sources":["/Users/aleksandergasior/Documents/tsh/react-interview-starter-ts/src/app/products/Products.tsx"],"names":["React","useContext","useEffect","useState","classNames","Pagination","AppContext","Header","Product","Info","FiltersOptions","PRODUCTS_PER_PAGE","active","promo","all","Products","products","filters","setFilters","currentPage","setCurrentPage","showProducts","setShowProducts","search","setSearch","filteredProducts","filter","product","name","toLowerCase","includes","toLocaleLowerCase","filtredProducts","countProducts","length","lastPage","Math","ceil","pageProducts","slice","buttonPrevClassess","buttonNextClassess","isProduct","renderProducts","map","id","description","rating","image","renderPagination","event","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport Pagination from \"@material-ui/lab/Pagination\";\nimport { AppContext } from \"../../providers/AppProviders\";\nimport { Header } from \"app/header/Header\";\nimport { Product } from \"../product/Product\";\nimport { Info } from \"../info/Info\";\n\nimport { AppContextProps } from \"providers/AppProviders.types\";\nimport { FiltersOptions } from \"app/filters/Filters.enum\";\nimport { ProductProps } from \"app/product/Product.types\";\nimport { PRODUCTS_PER_PAGE } from \"./Products.constants\";\n\nimport \"./Products.scss\";\n\nconst { active, promo, all } = FiltersOptions;\n\nexport const Products = () => {\n  const products = useContext<AppContextProps | null>(AppContext);\n  const [filters, setFilters] = useState<string[]>([all]);\n  const [currentPage, setCurrentPage] = useState<number>(1);\n  const [showProducts, setShowProducts] = useState<AppContextProps | null>(\n    products\n  );\n  const [search, setSearch] = useState<string>(\"\");\n\n  useEffect(() => setShowProducts(products), [products]);\n\n  const filteredProducts: ProductProps[] = showProducts!\n    .filter((product) => {\n      if (!product) return null;\n      if (search === \"\") {\n        return product;\n      } else if (\n        product.name.toLowerCase().includes(search.toLocaleLowerCase())\n      ) {\n        return product;\n      }\n    })\n    .filter((product) => {\n      const filtredProducts = () => {\n        if (product.active && filters.includes(active)) {\n          return product;\n        }\n        if (product.promo && filters.includes(promo)) {\n          return product;\n        }\n        if (filters.includes(all)) {\n          return product;\n        }\n      };\n      return filteredProducts;\n    });\n\n  const countProducts: number = filteredProducts.length;\n  const lastPage: number = Math.ceil(countProducts / PRODUCTS_PER_PAGE);\n\n  const pageProducts: ProductProps[] = filteredProducts.slice(\n    currentPage === 1 ? 0 : (currentPage - 1) * PRODUCTS_PER_PAGE,\n    PRODUCTS_PER_PAGE * currentPage\n  );\n\n  const buttonPrevClassess: string = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === 1,\n  });\n\n  const buttonNextClassess: string = classNames(\"products__button\", {\n    \"products__button--disabled\": currentPage === lastPage,\n  });\n\n  const isProduct: boolean = pageProducts.length !== 0;\n\n  const renderProducts: () => JSX.Element = () =>\n    isProduct ? (\n      <div className=\"products__container\">\n        {pageProducts.map((product) => {\n          const { id, name, description, rating, image, active, promo } =\n            product;\n          return (\n            <Product\n              name={name}\n              description={description}\n              rating={rating}\n              image={image}\n              active={active}\n              promo={promo}\n              id={id}\n              key={id}\n            />\n          );\n        })}\n      </div>\n    ) : (\n      <Info />\n    );\n\n  const renderPagination: () => JSX.Element | null = () =>\n    isProduct ? (\n      <div className=\"products__pagination\">\n        <button\n          className={buttonPrevClassess}\n          onClick={() => setCurrentPage(1)}\n        >\n          First\n        </button>\n        <Pagination\n          count={lastPage}\n          page={currentPage}\n          siblingCount={currentPage > 2 ? 1 : 0}\n          boundaryCount={lastPage > 6 ? 1 : 2}\n          hidePrevButton\n          hideNextButton\n          onChange={(event, value) => {\n            setCurrentPage(value);\n          }}\n        />\n        <button\n          className={buttonNextClassess}\n          onClick={() => setCurrentPage(lastPage)}\n        >\n          Last\n        </button>\n      </div>\n    ) : null;\n\n  return (\n    <>\n      <div className=\"products\">\n        <Header\n          setFilters={setFilters}\n          filters={filters}\n          setSearch={setSearch}\n          setCurrentPage={setCurrentPage}\n        />\n        {renderProducts()}\n        {renderPagination()}\n      </div>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}